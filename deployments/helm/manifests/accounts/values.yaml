replicaCount: 1

image: 
  repository: nginx
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

readinessProbe: # Checks that the container is started
  httpGet:
    path: /health/ready
    scheme: HTTPS
    port: 443
  initialDelaySeconds: 10
  timeoutSeconds: 3
  periodSeconds: 20
  failureThreshold: 3
livenessProbe: # Checks that the container is running
  httpGet:
    path: /health/live
    scheme: HTTPS
    port: 443
  initialDelaySeconds: 10
  timeoutSeconds: 3
  periodSeconds: 20
  failureThreshold: 3

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 10m
    memory: 12Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 50
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

tokenExpirationMinutes: "30"
accountActivationURL: "http://accounts/activate"

# Existing secrets and configmaps
existing:
  secrets:
    mySqlCredentials: "mysql-creds"
    firebaseCredentials: "firebase-creds"
    symmetricKeysCredentials: "symmetric-keys"
  configMaps:
    templatesConfig: "account-templates"

# Service configuration
config:
  serviceName: "USSD BILLING API"
  serviceType: ClusterIP
  httpPort: 80
  grpcPort: 8080
  startupSleepSeconds: 5
  logging:
    level: -1
    timeFormat: 2006-01-02T15:04:05Z07:00
  security:
    tlsKey: ""
    tlsCert: ""
    serverName: ""
    insecure: true
  databases:
  - required: true
    type: sqlDatabase
    address: mysql:3306
    user: onfon
    schema: ussd
    passwordFile: /app/secrets/mysql/mysql-password
    metadata:
      name: mysqlWrites
      dialect: mysql
      orm: gorm
  - required: true
    type: sqlDatabase
    address: mysql:3306
    user: onfon
    schema: ussd
    passwordFile: /app/secrets/mysql/mysql-password
    metadata:
      name: mysqlReads
      dialect: mysql
      orm: gorm
  - required: true
    type: redisDatabase
    address: localhost:6379
    metadata:
      name: redisWrites
  - required: true
    type: redisDatabase
    address: localhost:6379
    metadata:
      name: redisReads
  externalServices:
  - name: ussdchannel
    required: true
    address: ussdchannel:80
    k8service: true
    insecure: true
  - name: ussdlog
    required: true
    address: ussdlog:80
    k8service: true
    insecure: true